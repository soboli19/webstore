<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!--<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/4.4.1/darkly/bootstrap.min.css">-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link href="https://www.jqueryscript.net/css/jquerysctipttop.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">
    <link rel="stylesheet" href="css/bootnavbar.css">
    <link rel= "stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css">
    <link rel= "stylesheet" href="css/style.css">

    <title>Термопаста SuperPeg Stick-IT</title>
</head>

<body>
   <!-- <nav class="navbar navbar-expand-lg navbar-light bg-light" id="main_navbar">-->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark" id="main_navbar">
        <a class="navbar-brand" href="#">Navbar</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Link</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"
                        aria-haspopup="true" aria-expanded="false">
                        Dropdown
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="#">Action</a></li>
                        <li><a class="dropdown-item" href="#">Another action</a></li>
                        <div class="dropdown-divider"></div>
                        <li></li><a class="dropdown-item" href="#">Something else here</a></li>
                        <li class="nav-item dropdown">
                                <a class="dropdown-item dropdown-toggle" href="#" id="navbarDropdown1" role="button" data-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false">
                                    Dropdown
                                </a>
                                <ul class="dropdown-menu" aria-labelledby="navbarDropdown1">
                                    <li><a class="dropdown-item" href="#">Action</a></li>
                                    <li><a class="dropdown-item" href="#">Another action</a></li>
                                    <div class="dropdown-divider"></div>
                                    <li></li><a class="dropdown-item" href="#">Something else here</a></li>
                                    <li class="nav-item dropdown">
                                        <a class="dropdown-item dropdown-toggle" href="#" id="navbarDropdown2" role="button" data-toggle="dropdown"
                                            aria-haspopup="true" aria-expanded="false">
                                            Left Dropdown
                                        </a>
                                        <ul class="dropdown-menu left" aria-labelledby="navbarDropdown2">
                                            <li><a class="dropdown-item" href="#">Action</a></li>
                                            <li><a class="dropdown-item" href="#">Another action</a></li>
                                            <div class="dropdown-divider"></div>
                                            <li></li><a class="dropdown-item" href="#">Something else here</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                    </ul>
                </li>
                <li class="nav-item">
                    <a class="nav-link disabled" href="#">Disabled</a>
                </li>
            </ul>
            <!--<form class="form-inline my-2 my-lg-0">
                <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
            </form> -->
        </div>
    </nav>
    
               
<div class="container-fluid  p-5">
  <div class="row">
    <div class="col-12">
		<table class="table table-image">
		  <thead>
		    <tr>
		      <th scope="col"></th>
		      <th scope="col">   Наименование</th>
		      <th scope="col">Цена</th>
		      <th scope="col">Количество</th>
		      <th scope="col">Всего</th>
		    </tr>
		  </thead>
		  <tbody>
		    <tr>
		      <!--<th scope="row">1</th>-->
		      <td class="w-25" rowspan="2">
                             <img src="img/SuperPeg.jpg" alt="SuperPeg"  class="img-fluid img-thumbnail"> 
		      </td>
		      <td class="align-middle">
                           <div class="ml-3 d-inline-block align-middle">
                            <h5 class="text-center"> <a href="#" class="text-dark d-inline-block align-middle">Harvest SuperPeg II </a></h5>
                            <h6 class="mb-0" id="spec">упаковка 4 шприца 12ml</h6>
                            <span class="text-muted font-weight-normal font-italic d-block" style="width:150px; word-wrap:break-word;">Описание: Термопаста для фиксации коронок, мостов при обжиге</span>
                          </div> 
                      </td>
		      <td class="border-0 align-middle"><strong>52$</strong</td>
		      <td class="border-0 align-middle">
                        <input type="number" id="quantity1" name="quantity1"  min="0" max="15" style="width:50px;">
                      </td>
		      <td class="border-0 align-middle" id="subtotal" style="font-weight: bold;"></td>
		    </tr>
		    <tr>
		      <!--<th scope="row">2</th>-->
		      <!--<td class="w-25">
		            <img src="img/SuperPeg.jpg" alt="SuperPeg"  class="img-fluid img-thumbnail">
                      </td>-->
		      <td class="align-middle">
                           <div class="ml-3 d-inline-block align-middle">
                            <h5 class="mb-0"> <a href="#" class="text-dark d-inline-block align-middle">Harvest SuperPeg II </a></h5>
                            <h6 class="mb-0" id="spec">1 шприц 12ml</h6>
                            <span class="text-muted font-weight-normal font-italic d-block" style="width:150px; word-wrap:break-word;">Описание: Термопаста для фиксации коронок, мостов при обжиге</span>
                          </div>
                      </td>
                      <td class="align-middle"><strong>13$</strong</td>
                      <td class="align-middle"><strong>
                       <input type="number" id="quantity2" name="quantity2"  min="0" max="15" style="width:50px;"></strong>
                      </td>
                      <td class="align-middle" id="subtotal" style="font-weight: bold;"></td>
                    </tr>
  
                   <tr>
                      <!--<th scope="row">2</th>-->
                      <td class="w-25" rowspan="2">
                            <img src="img/Stick-IT.jpg" alt="Stick-IT"  class="img-fluid img-thumbnail">
                      </td>
                      <td class="align-middle">
                           <div class="ml-3 d-inline-block align-middle">
                            <h5 class="mb-0"> <a href="#" class="text-dark d-inline-block align-middle">Talladium Stick-IT </a></h5>
                            <h6 class="mb-0" id="spec">упаковка 3 шприца 12ml</h6>
                            <span class="text-muted font-weight-normal font-italic d-block" style="width:150px; word-wrap:break-word;">Описание: Термопаста для фиксации коронок, мостов при обжиге</span>
                          </div>
                      </td>
                      <td class="align-middle"><strong>33$</strong</td>
                      <td class="align-middle"><strong>
                       <input type="number" id="quantity3" name="quantity3"  min="0" max="15" style="width:50px;"></strong>
                      </td>
                      <td class=" align-middle" id="subtotal" style="font-weight: bold;"></td>
                    </tr>
                   <tr>
                      <!--<td class="w-25">
                            <img src="img/Stick-IT.jpg" alt="Stick-IT"  class="img-fluid img-thumbnail">
                      </td>-->
                      <td class="align-middle">
                           <div class="ml-3 d-inline-block align-middle">
                            <h5 class="mb-0"> <a href="#" class="text-dark d-inline-block align-middle">Talladium Stick-IT </a></h5>
                            <h6 class="mb-0" id="spec">1 шприц 12ml</h6>
                            <span class="text-muted font-weight-normal font-italic d-block" style="width:150px; word-wrap:break-word;">Описание: Термопаста для фиксации коронок, мостов при обжиге</span>
                          </div>
                      </td>
                      <td class="align-middle"><strong>11$</strong</td>
                      <td class="align-middle"><strong>
                       <input type="number" id="quantity3" name="quantity3"  min="0" max="15" style="width:50px;"></strong>
                      </td>
                      <td class=" align-middle" id="subtotal" style="font-weight: bold;"></td>
                   </tr>
                   <tr>
                      <td class="w-25">
                            <img src="img/ArgenST.jpg" alt="Stick-IT"  class="img-fluid img-thumbnail">
                      </td>
                      <td class="align-middle">
                           <div class="ml-3 d-inline-block align-middle">
                            <h5 class="mb-0"> <a href="#" class="text-dark d-inline-block align-middle">Argen ST Multilayer цирконий </a></h5>
                            <h6 class="mb-0" id="spec">диск 98x14mm</h6>
                            <span class="text-muted font-weight-normal font-italic d-block" style="width:150px; word-wrap:break-word;">Описание: цирконий для фрезерования коронок и мостов 50% прозрачность 850Mpa прочность</span>
                          </div>
                      </td>
                      <td class="align-middle"><strong>152$</strong</td>
                      <td class="align-middle"><strong>
                       <input type="number" id="quantity3" name="quantity3"  min="0" max="15" style="width:50px;"></strong>
                      </td>
                      <td class=" align-middle" id="subtotal" style="font-weight: bold;"></td>
                   </tr>
                  <tr>
                      <td class="w-25">
                            <img src="img/cd-b50-001.jpg" alt="Stick-IT"  class="img-fluid img-thumbnail">
                      </td>
                      <td class="align-middle">
                           <div class="ml-3 d-inline-block align-middle">
                            <h5 class="mb-0"> <a href="#" class="text-dark d-inline-block align-middle">BestQual полир для циркония </a></h5>
                            <h6 class="mb-0" id="spec" >форма цилиндр 5x12mm</h6>
                            <span class="text-muted font-weight-normal font-italic d-block" style="width:150px; word-wrap:break-word;">Описание: абразивный камень с алмазной крошкой для обработки циркония,керамики </span>
                          </div>
                      </td>
                      <td class="align-middle"><strong>15$</strong</td>
                      <td class="align-middle"><strong>
                       <input type="number" id="quantity3" name="quantity3"  min="0" max="15" style="width:50px;"></strong>
                      </td>
                      <td class=" align-middle" id="subtotal" style="font-weight: bold;"></td>
                   </tr>
 

		  </tbody>
		</table>   
    </div>
  </div>
             
           <div class="row py-5 p-4 bg-white rounded shadow-sm">
        <div class="col-lg-6">
          <div class="bg-light rounded-pill px-4 py-3 text-uppercase font-weight-bold">Coupon code</div>
          <div class="p-4">
            <p class="font-italic mb-4">If you have a coupon code, please enter it in the box below</p>
            <div class="input-group mb-4 border rounded-pill p-2">
              <input type="text" placeholder="Apply coupon" aria-describedby="button-addon3" class="form-control border-0">
              <div class="input-group-append border-0">
                <button id="button-addon3" type="button" class="btn btn-dark px-4 rounded-pill"><i class="fa fa-gift mr-2"></i>Apply coupon</button>
              </div>
            </div>
          </div>
          <div class="bg-light rounded-pill px-4 py-3 text-uppercase font-weight-bold">Instructions for seller</div>
          <div class="p-4">
            <p class="font-italic mb-4">If you have some information for the seller you can leave them in the box below</p>
            <textarea name="" cols="30" rows="2" class="form-control"></textarea>
          </div>
        </div>
        <div class="col-lg-6">
          <div class="bg-light rounded-pill px-4 py-3 text-uppercase font-weight-bold">Order summary </div>
          <div class="p-4">
            <p class="font-italic mb-4">Shipping and additional costs are calculated based on values you have entered.</p>
            <ul class="list-unstyled mb-4">
              <li class="d-flex justify-content-between py-3 border-bottom"><strong class="text-muted">Order Subtotal </strong>
                 <!-- <strong id="totalprice">0$</strong></li>-->
                 <h6 class="font-weight-bold" id="totalprice">$0</h6></li>
              <li class="d-flex justify-content-between py-3 border-bottom"><strong class="text-muted">Shipping and handling</strong><strong>$10.00</strong></li>
              <li class="d-flex justify-content-between py-3 border-bottom"><strong class="text-muted">Tax</strong><strong>$0.00</strong></li>
              <li class="d-flex justify-content-between py-3 border-bottom"><strong class="text-muted">Total</strong>
                <h5 class="font-weight-bold" id="totalprice">$0</h5>
              </li>
           </ul>
                <!--<a href="#" id="final" class="btn btn-dark rounded-pill py-2 btn-block">Оформить заказ</a>-->
                <button " id="final" class="btn btn-dark rounded-pill py-2 btn-block">Оформить заказ</button>
          </div>
        </div>
      </div>
</div>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
    <script src="js/bootnavbar.js" ></script>
    <script>
        $(function () {
            $('#main_navbar').bootnavbar();
        })
    </script>
   <script>
       var itemtotal = [];
       var order = [];
       var ordertotal = null;
       var quantity = null;
     $("[id^=quantity]").on("change paste keyup", function() {
           order = []; ordertotal = 0;
       var price = $(this).closest("td").prev("td").text();
       quantity =  $(this).val();
       if (price.length < 27) {
       price = Number(price.substring(0,2));}
       else {price = Number(price.substring(0, price.length - 24));}
        if ($(this).val()< 0 ) {alert("количество не может быть отрицательным"); price = 0;} 
        if ($(this).val()> 25) { 
         alert("Хотите купить количество "+ quantity + "шт? свяжитесь с консультантом");}
        else {var result = quantity *price;
         $(this).closest("td").next("td").text(result+"$");}

     $("[id^=subtotal]").each(function(index) {
       let subtotalstr = $(this).text();
          var tquantity = $(this).closest("td").prev("td").find("input").val();
          var spec =  $(this).prevUntil("div").find("[id=spec]").text();
          //console.log(spec); 
       if (!isNaN(parseInt(subtotalstr,10)) && parseInt(subtotalstr,10) != 0 ) {
           order[index] = $(this).prevUntil("div").find("a").text() +' || '+ spec  +' || '+ tquantity +' || ' +  subtotalstr;
           itemtotal[index]  = parseInt(subtotalstr,10); 
           ordertotal = ordertotal + parseInt(subtotalstr,10); } 
      });
       var orderdate = new Date();
       //order[order.length] = "Order Total: $" + ordertotal + '||'+ orderdate.toISOString().split('T')[0] ;
       order[order.length] = "Order Total: $" + ordertotal + '||'+ orderdate.toISOString().slice(0,16).split('T') ;
       //console.log(order);
       $("[id^=totalprice]").text("$" + ordertotal);
    });
      $("[id=final]").on("click", function() {
        event.preventDefault();
        console.log(order );
         var serializedData = String(order);     //JSON.stringify(order);
         console.log(typeof serializedData);
         console.log( serializedData);
       $.ajax({
          url: "weborder.php",
          //dataType: 'json',
          type: "post",
          data: serializedData,
          success: function (response) {

          alert('weborder.php executed '+ response);    // You will get response from your PHP page (what you echo or print)
          },
          error: function(jqXHR, textStatus, errorThrown) {
           alert('got error: ' +textStatus, errorThrown);
          }
       });
        //$.post("weborder.php", {
        //  myorder: serializedData}, function (data, status){
        //  console.log (dta);
        //  console.log(status);
        //  });
        //}); 
    }); 
  </script> 
</body>


</html>



